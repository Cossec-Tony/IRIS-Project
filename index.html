<!DOCTYPE html>
<html lang="en">
<head>
    <title>Tregrom projet IRISE</title>
    <link rel="stylesheet" href="style.css">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1">
    <meta itemprop="name" content="Tregrom phase1">
    <meta itemprop="description" content="made with cables">
    <meta itemprop="image" content="screenshot.png">
    <meta name="description" content="made with cables"/>
</head>
<body>

  <!-- NAV -->
  <nav class="top-nav">
    <a href="https://github.com/Cossec-Tony/IRIS-Project" target="_blank" rel="noopener">Github</a>
    <a href="#" id="openStory">Histoire</a>
    <a href="#">Contact</a>
  </nav>

  <!-- HOME SCREEN -->
  <div id="home" class="home-screen">
    <h1 class="main-title">Le Saumon Atlantique</h1>
    <button id="startBtn" class="start-btn">Entrer dans l'experience</button>
  </div>

  <div id="story" class="story-screen">
    <div class="story-content">
      <h1>Histoire</h1>
      <p>
        L'objectif etait de proposer une interpretation multimedia creative basee
        sur une entite (faune ou flore) issue du site du Leguer a Tregrom
        (classe Natura 2000), et utilisant de veritables donnees extraites de
        l'application <em>Le Fil des Temps</em> :
        <br><br>
        <a href="https://gregoirecliquet.xyz/irise/index_frfr.html" target="_blank">
          Le Fil des Temps
        </a>
      </p>
      <p>
        Nous avons choisi l'espece du <strong>saumon Atlantique</strong>,
        une espece migratoire protegee et essentielle a l'ecosysteme.
      </p>
      <p>
        A travers un dispositif de mapping video interactif, le visiteur est invite
        a suivre le parcours de vie du saumon (en trois phases), de sa naissance
        a son retour sur son lieu de reproduction.
      </p>
      <p>
        Le projet adopte une approche sensible et poetique, inspiree de l'univers
        de l'aquarelle, evoquant l'innocence du regard d'un enfant face a la nature.
        L'objectif n'est pas d'alerter par la peur, mais de provoquer l'empathie,
        l'emerveillement et la prise de conscience collective.
      </p>
      <h2>Parcours narratif</h2>
      <h3>La naissance</h3>
      <p>
        Le saumon s'affiche a l'ecran et se deplace en fonction des mouvements de la souris du visiteur.
        Le decor evolue en fonction des conditions meteorologiques reelles du
        Leguer, ancrant l'experience dans le reel.
      </p>
      <h3>La traversee</h3>
      <p>
        Le saumon traverse une serie de tableaux symbolisant les etapes qu'il
        affronte en mer : pollution, rechauffement de l'eau, residus medicamenteux,
        rarefaction de son alimentation.
      </p>
      <h3>Le retour</h3>
      <p>
        Le saumon atteint son lieu de reproduction, le Leguer. A la fin du parcours,
        un nouvel oeuf apparait et s'illumine. Plus il y a de visiteurs, plus le nombre
        d'oeufs augmente, symbolisant la force de la prise de conscience collective.
      </p>
      <p class="story-credits">
        Realise en partie avec CableGL<br>
        <strong>Hugo Cossec</strong> - <strong>Kimberley Le Couls</strong>
      </p>
      <button id="closeStory" class="close-btn">Fermer</button>
    </div>
  </div>

  <!-- FADE OVERLAY -->
  <div id="fade" class="fade-overlay"></div>

  <!-- LOADING CIRCLE -->
  <div id="edgeLoader" class="edge-loader"></div>

  <!-- THANK YOU SCREEN -->
  <div id="thanks" class="thanks-screen">
    <h1>Merci pour votre visite !</h1>
    <p>Illustratrice : <strong>Kimberley Le Couls</strong></p>
    <p>Developpeur : <strong>Hugo Cossec</strong></p>
  </div>

  <!-- AUDIO -->
  <audio id="bgMusic" loop>
    <source src="./assets/water-fountain-healing-music-239455.mp3.mkv.mp3" type="audio/mpeg">
  </audio>

  <!-- PHASE 1 : Canvas CableGL -->
  <div id="phase1" class="phase phase-1">
    <canvas id="glcanvas" width="100vw" height="100vh" tabindex="1"></canvas>
  </div>

  <!-- PHASE 2 : Video -->
  <div id="phase2" class="phase phase-2">
    <video id="video2" playsinline muted preload="auto">
       <source src="./assets/Phase2.mp4" type="video/mp4" />
    </video>
    <div id="playOverlay2" class="play-overlay">
      <button class="play-btn">Cliquer pour jouer l'animation</button>
    </div>
  </div>

  <!-- PHASE 3 : Video -->
  <div id="phase3" class="phase phase-3">
    <video id="video3" playsinline muted preload="auto">
       <source src="./assets/Phase3.mp4" type="video/mp4" />
    </video>
    <div id="playOverlay3" class="play-overlay">
      <button class="play-btn">Cliquer pour jouer l'animation</button>
    </div>
  </div>

  <script type="text/javascript" src="js/patch.js" async></script>
  <script src="./experience.js"></script>
  <script type="text/javascript">
    function showError(initiator,...args) {
      CABLES.logErrorConsole("[" + initiator + "]", ...args);
    }

    function patchInitialized(patch) {
      // You can now access the patch object (patch), register variable watchers and so on
    }

    function patchFinishedLoading(patch) {
      // The patch is ready now, all assets have been loaded
    }

    document.addEventListener("CABLES.jsLoaded", function (event) {
      CABLES.patch = new CABLES.Patch({
        patch: CABLES.exportedPatch,
        "prefixAssetPath": "",
        "assetPath": "assets/",
        "jsPath": "js/",
        "glCanvasId": "glcanvas",
        "glCanvasResizeToWindow": true,
        "onError": showError,
        "onPatchLoaded": patchInitialized,
        "onFinishedLoading": patchFinishedLoading,
        "canvas": {"alpha":true, "premultipliedAlpha":true }
      });
    });

    // disable rubberband effect on mobile devices
    document.getElementById('glcanvas').addEventListener('touchmove', (e)=>{ e.preventDefault(); }, false);
  </script>
</body>
</html>
